(()=>{"use strict";class t{constructor(t,e){this._form=e,this._settings=t,this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submitButtonElement=this._form.querySelector(this._settings.submitButtonSelector)}_showError(t,e){const r=this._form.querySelector(`#error-${t.id}`),{inputErrorClass:i,errorClass:o}=this._settings;r.textContent=e,r.classList.add(o),t.classList.add(i)}_hideError(t){const e=this._form.querySelector(`#error-${t.id}`),{inputErrorClass:r,errorClass:i}=this._settings;e.textContent="",e.classList.remove(i),t.classList.remove(r)}_checkValidity(t){t.validity.valid?this._hideError(t):this._showError(t,t.validationMessage)}_hasInvalidInput=()=>this._inputList.some((t=>!t.validity.valid));_toggleButtonState=()=>{this._hasInvalidInput()?(this._submitButtonElement.classList.add(this._settings.inactiveButtonClass),this._submitButtonElement.setAttribute("disabled",!0)):(this._submitButtonElement.classList.remove(this._settings.inactiveButtonClass),this._submitButtonElement.removeAttribute("disabled"))};_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetErrors(){this._form.reset(),this._inputList.forEach((t=>{this._hideError(t)})),this._toggleButtonState()}}const e=document.querySelector(".popup_fullview"),r=e.querySelector(".popupfullview__picture"),i=e.querySelector(".popupfullview__caption");function o(t){t.classList.add("popup_opened"),t.addEventListener("click",n),document.addEventListener("keydown",l)}function s(t){t.classList.remove("popup_opened"),t.removeEventListener("click",n),document.removeEventListener("keydown",l)}const n=t=>{(t.target.classList.contains("popup")||t.target.classList.contains("button-close"))&&s(document.querySelector(".popup_opened"))},l=t=>{"Escape"===t.key&&s(document.querySelector(".popup_opened"))};class a{constructor(t,e){this._template=document.querySelector(e).content.querySelector(".cards"),this._name=t.name,this._link=t.link}_deleteCard=()=>{this._cardElement.remove(),this._cardElement=null};_likeCard(t){t.target.closest(".cards__button").classList.toggle("cards__button_like")}_openFullviewCard(t){r.src=t.target.src,r.alt=t.target.alt,i.textContent=t.target.alt,o(e)}createCard(){this._cardElement=this._template.cloneNode(!0);const t=this._cardElement.querySelector(".cards__picture");return this._cardElement.querySelector(".cards__title").textContent=this._name,t.src=this._link,t.alt=this._name,this._addLiseners(this._cardElement),this._cardElement}_addLiseners(t){t.querySelector(".cards__delete-button").addEventListener("click",this._deleteCard),t.querySelector(".cards__button").addEventListener("click",this._likeCard),t.querySelector(".cards__picture").addEventListener("click",this._openFullviewCard)}}const c=document.querySelector(".profile__button-change"),u=document.querySelector(".popup_profile"),d=(u.querySelector(".button-close"),u.querySelector(".popup__form")),_=u.querySelector(".form__input_field_name"),p=u.querySelector(".form__input_field_description"),m=document.querySelector(".profile__name"),h=document.querySelector(".profile__self-description"),f=(u.querySelector(".button-save"),document.querySelector(".profile__button-addphoto")),b=document.querySelector(".popup_photo"),v=(b.querySelector(".button-close"),b.querySelector(".button-save"),b.querySelector(".form__input_field_title")),y=b.querySelector(".form__input_field_link"),x=b.querySelector(".popup__form"),S=(e.querySelector(".button-close"),document.querySelectorAll(".cards"),{formSelector:".popup__form",inputSelector:".form__input",submitButtonSelector:".button-save",inactiveButtonClass:"button-save:disabled",inputErrorClass:"form__input_error",errorClass:"form__field-error_visible"}),E=new t(S,d),q=new t(S,x);E.enableValidation(),q.enableValidation(),c.addEventListener("click",(()=>{E.resetErrors(),_.value=m.textContent,p.value=h.textContent,o(u)})),f.addEventListener("click",(()=>{q.resetErrors(),o(b)})),d.addEventListener("submit",(function(t){t.preventDefault(),m.textContent=_.value,h.textContent=p.value,s(u)}));const w=document.querySelector(".images__list"),g=t=>{const e=new a(t,".item__template").createCard();w.prepend(e)};x.addEventListener("submit",(t=>{t.preventDefault(),g({name:v.value,link:y.value}),s(b),t.target.reset()})),[{name:"Гора Казбек",link:"https://images.unsplash.com/photo-1563284223-333497472e88?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1176&q=80"},{name:"Арка дружбы народов",link:"https://images.unsplash.com/photo-1549466785-f5c1771646cc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"},{name:"Жинвальское водохранилище",link:"https://images.unsplash.com/photo-1607068798195-d26a9703b277?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"},{name:"Монастырь Джвари",link:"https://images.unsplash.com/photo-1581169837556-3bd4c2b14e62?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzN8fGdlb3JnaWF8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Тбилисский театр марионеток",link:"https://images.unsplash.com/photo-1584097774573-1c3cc28b2aef?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTF8fGdlb3JnaWF8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Тбилиси",link:"https://images.unsplash.com/photo-1565008576549-57569a49371d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"}].forEach((t=>{g(t)}))})();