(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r=function(){function r(e,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,"_hasInvalidInput",(function(){return i._inputList.some((function(e){return!e.validity.valid}))})),t(this,"_toggleButtonState",(function(){i._hasInvalidInput()?(i._submitButtonElement.classList.add(i._settings.inactiveButtonClass),i._submitButtonElement.setAttribute("disabled",!0)):(i._submitButtonElement.classList.remove(i._settings.inactiveButtonClass),i._submitButtonElement.removeAttribute("disabled"))})),this._form=n,this._settings=e,this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submitButtonElement=this._form.querySelector(this._settings.submitButtonSelector)}var n,i;return n=r,(i=[{key:"_showError",value:function(e,t){var r=this._form.querySelector("#error-".concat(e.id)),n=this._settings,i=n.inputErrorClass,o=n.errorClass;r.textContent=t,r.classList.add(o),e.classList.add(i)}},{key:"_hideError",value:function(e){var t=this._form.querySelector("#error-".concat(e.id)),r=this._settings,n=r.inputErrorClass,i=r.errorClass;t.textContent="",t.classList.remove(i),e.classList.remove(n)}},{key:"_checkValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetErrors",value:function(){var e=this;this._form.reset(),this._inputList.forEach((function(t){e._hideError(t)})),this._toggleButtonState()}}])&&e(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),r}(),n=document.querySelector(".popup_fullview"),i=n.querySelector(".popupfullview__picture"),o=n.querySelector(".popupfullview__caption");function a(e){e.classList.add("popup_opened"),e.addEventListener("click",l),document.addEventListener("keydown",u)}function s(e){e.classList.remove("popup_opened"),e.removeEventListener("click",l),document.removeEventListener("keydown",u)}var l=function(e){(e.target.classList.contains("popup")||e.target.classList.contains("button-close"))&&s(document.querySelector(".popup_opened"))},u=function(e){"Escape"===e.key&&s(document.querySelector(".popup_opened"))};function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(t,r){var n,i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(){o._cardElement.remove(),o._cardElement=null},(n="_deleteCard")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._template=document.querySelector(r).content.querySelector(".cards"),this._name=t.name,this._link=t.link}var t,r;return t=e,(r=[{key:"_likeCard",value:function(e){e.target.closest(".cards__button").classList.toggle("cards__button_like")}},{key:"_openFullviewCard",value:function(e){i.src=e.target.src,i.alt=e.target.alt,o.textContent=e.target.alt,a(n)}},{key:"createCard",value:function(){this._cardElement=this._template.cloneNode(!0);var e=this._cardElement.querySelector(".cards__picture");return this._cardElement.querySelector(".cards__title").textContent=this._name,e.src=this._link,e.alt=this._name,this._addLiseners(this._cardElement),this._cardElement}},{key:"_addLiseners",value:function(e){e.querySelector(".cards__delete-button").addEventListener("click",this._deleteCard),e.querySelector(".cards__button").addEventListener("click",this._likeCard),e.querySelector(".cards__picture").addEventListener("click",this._openFullviewCard)}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=document.querySelector(".profile__button-change"),_=document.querySelector(".popup_profile"),f=(_.querySelector(".button-close"),_.querySelector(".popup__form")),m=_.querySelector(".form__input_field_name"),h=_.querySelector(".form__input_field_description"),v=document.querySelector(".profile__name"),b=document.querySelector(".profile__self-description"),y=(_.querySelector(".button-save"),document.querySelector(".profile__button-addphoto")),w=document.querySelector(".popup_photo"),x=(w.querySelector(".button-close"),w.querySelector(".button-save"),w.querySelector(".form__input_field_title")),E=w.querySelector(".form__input_field_link"),S=w.querySelector(".popup__form"),q=(n.querySelector(".button-close"),document.querySelectorAll(".cards"),{formSelector:".popup__form",inputSelector:".form__input",submitButtonSelector:".button-save",inactiveButtonClass:"button-save:disabled",inputErrorClass:"form__input_error",errorClass:"form__field-error_visible"}),g=new r(q,f),k=new r(q,S);g.enableValidation(),k.enableValidation(),p.addEventListener("click",(function(){g.resetErrors(),m.value=v.textContent,h.value=b.textContent,a(_)})),y.addEventListener("click",(function(){k.resetErrors(),a(w)})),f.addEventListener("submit",(function(e){e.preventDefault(),v.textContent=m.value,b.textContent=h.value,s(_)}));var L=document.querySelector(".images__list"),C=function(e){var t=new d(e,".item__template").createCard();L.prepend(t)};S.addEventListener("submit",(function(e){e.preventDefault(),C({name:x.value,link:E.value}),s(w),e.target.reset()})),[{name:"Гора Казбек",link:"https://images.unsplash.com/photo-1563284223-333497472e88?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1176&q=80"},{name:"Арка дружбы народов",link:"https://images.unsplash.com/photo-1549466785-f5c1771646cc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"},{name:"Жинвальское водохранилище",link:"https://images.unsplash.com/photo-1607068798195-d26a9703b277?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"},{name:"Монастырь Джвари",link:"https://images.unsplash.com/photo-1581169837556-3bd4c2b14e62?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzN8fGdlb3JnaWF8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Тбилисский театр марионеток",link:"https://images.unsplash.com/photo-1584097774573-1c3cc28b2aef?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTF8fGdlb3JnaWF8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Тбилиси",link:"https://images.unsplash.com/photo-1565008576549-57569a49371d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8Z2VvcmdpYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60"}].forEach((function(e){C(e)}))})();